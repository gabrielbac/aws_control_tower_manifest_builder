region: us-east-1
version: 22-03-27
resources: # List of resources
- name: testS3
  resource_file: https://s3.amazonaws.com/solutions-reference/customizations-for-aws-control-tower/latest/custom-control-tower-initiation.template      #<String> [Local File Path, S3 URL]
  deployment_targets:   # account and/or organizational unit names
    accounts:   # array of strings, [0-9]{12}
    - 123456789012
    - 987456123989
    organizational_units:   #array of strings
    - dev
    - prod
  deploy_method: stack_set   # scp | stack_set
  regions:
  - us-east-1
  - us-east-2
- name: detailed_template
  resource_file: tests/sample_templates/cf_template_detailed.yaml      #<String> [Local File Path, S3 URL]
  deployment_targets:   # account and/or organizational unit names
    accounts:   # array of strings, [0-9]{12}
    - 123456789012
    - 987456123989
    organizational_units:   #array of strings
    - dev
    - prod
  deploy_method: stack_set   # scp | stack_set
  parameters:   # List of parameters [SSM, Alfred, Values]
  - parameter_key: parameter1
    parameter_value: value1
  - parameter_key: parameter2
    parameter_value: value2
  export_outputs:   # list of ssm parameters to store output values
  - name: /org/member/test-ssm/app-id
    value: $[output_ApplicationId]
  regions:
  - us-east-1
  - us-east-2
- name: cf_template_exclamation_mark
  resource_file: tests/sample_templates/cf_template_exclamation_mark.yaml      #<String> [Local File Path, S3 URL]
  deployment_targets:   # account and/or organizational unit names
    accounts:   # array of strings, [0-9]{12}
    - 937081937185
  deploy_method: stack_set   # scp | stack_set
  parameters:   # List of parameters [SSM, Alfred, Values]
  - parameter_key: GitHubOrg
    parameter_value: Nifty-Island
  - parameter_key: RepositoryName
    parameter_value: nifty-island-control-tower
  - parameter_key: OIDCProviderArn
    parameter_value: arn:aws:iam::937081937185:oidc-provider/token.actions.githubusercontent.com
  - parameter_key: BucketArn
    parameter_value: custom-control-tower-configuration-937081937185-us-east-2
  export_outputs:   # list of ssm parameters to store output values
  - name: /controltowercustomizations/ControlTowerCustomizationPipelineUploadS3
    value: $[output_Role]
  regions:
  - us-east-2
- name: templateLocalIAM
  description: Template to deploy baseline IAM resources
  resource_file: tests/sample_templates/cf_template_local.yaml      #<String> [Local File Path, S3 URL]
  deployment_targets:   # account and/or organizational unit names
    accounts:   # array of strings, [0-9]{12}
    - 123456789012
    - 987456123989
    organizational_units:   #array of strings
    - dev
    - prod
  deploy_method: stack_set   # scp | stack_set
  regions:
  - us-east-1
  - us-east-2
- name: cf_template_minimal
  resource_file: tests/sample_templates/cf_template_minimal.yaml      #<String> [Local File Path, S3 URL]
  deployment_targets:   # account and/or organizational unit names
    accounts:   # array of strings, [0-9]{12}
    - 123456789012
    - 987456123989
  deploy_method: stack_set   # scp | stack_set
  regions:
- name: ec2_deny
  resource_file: tests/sample_scp/ec2_deny.yaml      #<String> [Local File Path, S3 URL]
  deployment_targets:   # account and/or organizational unit names
    accounts:   # array of strings, [0-9]{12}
    - 123456789012
    - 987456123989
    organizational_units:   #array of strings
    - dev
    - prod
  deploy_method: scp   # scp | stack_set
  regions:
  - us-east-1
  - us-east-2
